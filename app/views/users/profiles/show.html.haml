= stylesheet_link_tag "users/profile"
= javascript_include_tag "users/manifest"

- content_for :head do
  :javascript
    $(function() {
      $('#star-average').raty({ readOnly: true, score: 4.5 });
    });
    $(function() {
      $('#star-average1').raty({ readOnly: true, score: 3 });
    });
    $(function() {
      $('#star-average2').raty({ readOnly: true, score: 5 });
    });
  / Old code for generating each review's rating
  / -@profile.user.reviews.each do |review|
  /   :javascript
  /     $(function() {
  /       $('#star#{review.id}').raty({ readOnly: true, score: #{review.rating} });
  /     });

#profile
  #user-overview.row
    .container
      .col-md-2.col-xs-12
        =image_tag(@user.image.url, class: "img-circle avatar")
      .col-md-8.col-md-offset-1.col-xs-12
        %h1.name
          =@user.name.capitalize
        %h6.location
          =@user.location.capitalize
        // Maybe a modal or something?
        %a{"data-toggle" => "modal", :href => "#calendarModal"} See My Calendar
        %hr
        %p.tagline
          =@user.tag_line
        %br
        %button.message
          %i.icon-envelope
          Message me
        &nbsp;
        %span.visible-sm
          %br
        -if @user.expert?
          %button.appointment
            %i.icon-calendar
            Make Appointment
        &nbsp;
      .col-md-1.col-xs-12
        %ul.list-unstyled.links
          %li
            -if @social_links[:facebook]
              =link_to @social_links[:facebook], target: "_blank" do
                %i.icon-facebook
            - else
              %i.icon-facebook.disabled
          %li
            -if @social_links[:linkedin]
              =link_to @social_links[:linkedin], target: "_blank" do
                %i.icon-linkedin
            -else
              %i.icon-linkedin.disabled
          %li
            -if @social_links[:twitter]
              =link_to @social_links[:twitter], target: "_blank" do
                %i.icon-twitter
            -else
              %i.icon-twitter.disabled
          %li
            -if @social_links[:google]
              =link_to @social_links[:google], target: "_blank" do
                %i.icon-google-plus
            -else
              %i.icon-google-plus.disabled
          %li
            -if @social_links[:stackexchange]
              =link_to @social_links[:stackexchange], target: "_blank" do
                %i.icon-stackexchange
            -else
              %i.icon-stackexchange.disabled
          %li
            -if @social_links[:github]
              =link_to "http://www.github.com", target: "_blank" do
                %i.icon-github
            -else
              %i.icon-github.disabled
          %li
            -if @social_links[:personal]
              =link_to "http://www.henryhund.com", target: "_blank" do
                %i.icon-link
            -else
              %i.icon-link.disabled
  -if @user.expert?
    #user-detail.row
      .container
        .col-md-4.left
          %p.detail-label My rating is
          .detail-content
            .star{id: "star-average"}
        .col-md-4.center
          %p.detail-label I've had
          %p.detail-content 15 conversations
        .col-md-4.right
          %p.detail-label My hourly rate is
          %p.detail-content $30 / hour
    #expertise.row
      .container
        .col-md-12
          %h1 I'm an expert with
          %ul.list-unstyled.tags
            -@user.skill_list.each do |skill|
              =link_to "#" do
                %li.highlighted
                  =skill
    #expertise-detail.row
    .container
      .col-md-12
        %span.title
          %h1 I can also help with
        %hr
        %h2 Picking a CTO
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 Designing Databases
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 Front End
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 More
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 More
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
  -else
    #expertise-detail.row
    .container
      .col-md-12
        %span.title
          %h1 I am interested in
        %hr
        %h2 Picking a CTO
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 Designing Databases
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 Front End
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 More
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
        %hr
        %h2 More
        %p.body-container
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam euismod consectetur facilisis. Curabitur quis elementum lorem, eu tempor sem. Aenean porta eu lectus quis elementum. In ac elit at est posuere varius. Sed turpis purus, ultrices lobortis pulvinar eu, pellentesque blandit libero. Sed dictum rhoncus leo. Fusce quis tempus lorem, et tempus turpis. Sed fermentum, velit non viverra rhoncus, enim nisi tincidunt libero, et porttitor sapien felis in nibh.
  #bio.row
    .container
      .col-md-12
        %span.title
          %h1 About me
        %hr
        %span.body-container
          %p
            =@user.bio

  -if @user.expert?
    #reviews.row
      .container
        .col-md-12
          %span.title
            %h1 Reviews
            %hr
          %ul.list-unstyled
            -@reviews.each do |review|
              %li
                -reviewer = review.reviewer
                .review-picture-div
                  =link_to "#", class: "review-name-link" do
                    =image_tag(reviewer.image.url, class: "img-circle review-image")
                    %p.review-name
                      =reviewer.name
                  %p 7/8/13
                  .star
                .review-detail-div
                  %p
                    =review.content
                  %hr
                  %span.strong
                    Topics:&nbsp;&nbsp;
                  -review.tags.each do |tag|
                    =link_to "#" do
                      %span.highlighted
                        =tag
              %hr.divider
            
    #calendarModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "calendarModalLabel", :role => "dialog", :tabindex => "-1"}
      .modal-dialog
        .modal-content
          .modal-header
            / %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} x
            %h4.modal-title Henry's Calendar
          .modal-body
            =render "calendar"
          .modal-footer
            %p Press ESC to Exit
            / %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Close
            / %button.btn.btn-primary{:type => "button"} Save changes

